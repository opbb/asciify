<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>The web site of opbb-test-site</title>
        <!-- image-js package can be found here https://github.com/image-js/image-js -->
        <script src="/site/packages/image-js.min.0.36.0.js"></script>
        <!-- FileSaver.js package can be found here https://github.com/eligrey/FileSaver.js -->
        <script src="/site/packages/FileSaver.min.js"></script>
        <!-- jszip package can be found here https://github.com/Stuk/jszip -->
        <script src="/site/packages/jszip.min.js"></script>
        <link rel="stylesheet" href="/site/style.css" />
    </head>
    <body>
        <div id="control-buttons">
            <input
                id="image-selector"
                type="file"
                accept=".png,.jpg,.jpeg,.tiff,.tif"
                onchange="loadImage()"
            />
            <label for="image-selector"><div class="button">Upload</div></label>
            <div class="button" id="image-process" onclick="processImage()">
                Generate Text
            </div>
            <div class="button" id="save-button" onclick="saveFile()">Save</div>
        </div>
        <div id="content-container">
            <img id="media" src="/site/lobster-full-width.jpg" />

            <br />

            <p id="result" class="ascii-image">
                #########################**********@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#$$$##$$$$$$##$##$$$$$$$###$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ############################********##@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$###$#$$$$#$$###$$$$$$$##$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ###############################***##*####@@$$$$$$$@$$$$$$$$$$$$$$$$$$$$$#$$$##$$#$$$$#$$$$$$$$###$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                #########################***####**#########$$$$$$$$$$$$$$$$$$$$$$$$$$$#$$$$$$$##$$$$$$$##$$$$$$$##$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ##########################**#*##***###########$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$##$$$#$####$$$$$$$#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ############################**####*##############@@$$$$$$@@@$$$$$$$$$$$$$$$$$$$$$###$$####$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@<br />
                ############################**#####*#####*########*@@$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$###$$$$$$#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@@@@<br />
                ##########################****#####*#####****########*@@$$$$$$@@$$$$$$$$$$$$$$$$$$$$$###$$$$$$##$$##$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$@@<br />
                ##########################******###########**##########*@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$##$$$$$$$##$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@@<br />
                ############################*******#####################**#@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ############################**********########*#*#**####**####@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$@$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br />
                ############################*******#****######*#**######**######@@$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$===$<br />
                ############################*******####*#**####**#################!!$$##$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$<br />
                ##############################******######*#####*#################!$$$##$$$$$@$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$===$<br />
                ##################################******#########################**$*$~~$$$$$$$@@$$$$$@@$$$$$$$$$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$$$$$===$<br />
                #####################################***#**######################****$~~**$$$$#$$$@$$$$$$$$$$$$$@$$$$$$$$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$$$$$$$$$$===$<br />
                #########################################****####################*****#~!==$**#$$$$$@@$$$$$@@$$$$$@$$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$$$$$$$$$$$$$$===$<br />
                ############################***####***#####**####################=****##!==$$=~#@@$$$$$@$$$$$@@$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$=======$$$$$$$$$==$$$$#@@@===$<br />
                ############################*****##******##****#################===**=##!#=$$==####@$$$$@@@$$$$@@$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$========$$$$$$$$$$$$$==@#=$@#$$===$<br />
                ###############################**##*###**#####*###############=====*====!##$$==######@@$@$$@@$@$$$@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;======$$$$$$$$$$$$$$#@@@#@===$$$$@===$<br />
                ###############################*****#########################===!=======!##$$###########@@@@$@@@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;==$$$$$$$$$$$$$$$@$@##@@@@=$===$@@===$<br />
                ############################*##******#######################====!!==!!!!!!!!$############$@@@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;;;$;;==$$$$$$$$~@@@#$@@@@##$@$$@$===@@@===$<br />
                ###############################******#####################======!!=***!!!!!!!!!:########$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;;;$$$$$;;!!$$$~~~~~$@@@@$$$@@@@@$$@$$@$@@@@===$<br />
                #############################************################=======!###!!!!!!!!!!!!#########$$$$@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;;$$$$$$$$$$;;!!~~~~~~~~#$@@@$@@@@$@@@@@@$@@@@@@==$$<br />
                ##########################*#*************##############$!=======!$$$***!!!***###########$$$$$@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;;;$$$$$$$;;$$~~~;;!!~~~~~~@##@@$@@$$$@@$@@@@@@$@@@@@==$#<br />
                ##########################*#*##*******################$$*=======!$$$$$$$################$$$$$@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$;;=;;;$$$$$$$$$$$~;;;~~~~;;!!~~~$@@@@$$@@@$$@$@@@@@@@$@$@@@@===$#<br />
                ###########################***#*******############**##$!========!!::$$$$$############$$$$$$$$@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$;;;;;;=$$$$$$$$$~~~~~~~~;~~~~;;!~~~@$@$###@$$@@$@@@@@@@@@$$@#@$@===##<br />
                ###########################******##***##############*#*!========!!::::::$############$$$$$$$$@@$$$$$$$$$$$$$$$$$$$$$$$;;;;;;$$$$;=$$$$$$@$~~~~~~~~~~==~~;;!~~~$#@$@@#$@$@$$$@@@@@#@##@@#$$$===##<br />
                ##########################***#****####################*!=====!==!!:::::::############$$$$$$$$@@@$$$$$$$$$$$$$$$$$$;;;;;;$$$$$$$$;!@$@#@@@$~$~~~~~~~~~~~~;;!~~~#@@$$$$$$@@@$@@##@#$@@@$$@@@@===$$<br />
                ##########################***#******####****#*########!!!==!!!=!!!:::::::#############$$$$$$$@@$$$$$$$$$$$$$$$$=;;;$$$$$$$$;$#@@;!$$$@#$@@$###~~~~~~~~~~;!!~~~$$$$$@@$@@@$$@@##$#$$@@@@$$@@===#$<br />
                ###########################***********####**#****#####!!!!!!!!=!!!!!:::::############$$$$$$$$@@@$$$$$$$$$$$$$$$=$$$$$$$$###@;$*;;!@@##@$@$$#**$~~~~~~~~~;!!~~~~$$$$@@@$#@@@$@@@$@@@$$@@@@@@===#$<br />
                ###########################*********############*#####!=!!!!!!=*;;:!!!!!!###########$$$$$$$$$@@$$$$$$$$$$$$$$$$!$$$$@#$$#@#*#=$;;!@@##@@@#$@$###~~~~~~~~;!!~~~~$$~~@@@$@$@$@$@@$$$$$$$@$$$$===#$<br />
                #################################***##################!=!!!!!!!*;;;;;;;:############$$$$$$$$$@@@$$$$$$$$$$$$$$$!$$$##$$@##@@$##;;!@@#@#$@$##$#$$~~~~~~~~;!!~~~~~~~~$$@$@$@@$@@$$@#@##$@#$$$===#$<br />
                ##########################*#######***#################!=!!!!!!!$**;;;;;;############$$$$$$$$$@@@$$$$$$$$$$$$$$$!$###$@@#$$@$*@*;;!$*@$#$$$$$$#$#~~~~~~~;;!!~~~~~~~~$$$$@@@##@@#@#$#@@#$$$@$===#$<br />
                ##########################***#**##***#####****########!$**!!!!$$********############$$$$$$$$$@@@$$$$$$$$$$$$$$$!$###@$$@@@##@#*;;!#@*$#@$@$$$$$#~~~~~--;;!!---#@##-#@@###$#@####@#$@@@@@@@@===#$<br />
                ############################*#**####**####****####@@##$$******##********#############$$$$$$$$@@$$$$$$$$$$$$$$$$=#####$@$$@@*@$@;;!*@#****@$$$$$$-------;;!!--@@@$@@@#$##@#@@@#@$@#@#$$$@@$@===#$<br />
                ##############################**####**#########**#$####$******###$$$****#############$$$$$$$$@@@$$$$$$$$$$$$$$$!####@@@@@@#*@@#;;!*$$#@@#@$$#----------;;!!--$#@$$$@@###@@#@@@@@$@@@$$$@#@@==##$<br />
                ###########################**#**##################$####$******###$$$*****##$#########$$$$$$$$@@@$$$$$$$$$$$$$#$=####$$#$#@$*@*$;;!@##@@@$@-------------;;!!--###@@$@$#@@##@##@$#$$@@#@@@@$$==##$<br />
                ###########################***********########$###$##$$$######$##$$$*****##$$$****##$$$$$$$$$@@@$$$$$$$$$$##$##=####@$@@@##*$@$;;!**@$@#*@@#*----------;;!!@$==#$@@$$@@@##$@##$@@@@#@#$#$$@==##$<br />
                ##############################************####$###$##$$$######$$$#####***##$$$****##$$**$$$$$@@@$$$$$$$$$$##$##=####$#$$#@$*$$@;;!@*$#*@@$$#$##--------==!!@@====@@@@#$$@@#$$$$@@@$#@@#@$@===##$<br />
                ##############################*******#########$##$$##$$$######$$$########$$##$****##$$***##$$@@@$$$$$$$$$$#####=####@@@$$@$@$$$;;!*@#**$@$###$$$-------;;!!#@@#==@$$$$$$$$$$$$$$$@@###@$##===##$<br />
                ##############################*******######$#$$##$$##$$$######$$$########$$#######$$#$***##$$@@@$$$$$$$$$$$####=####@$$@$$@@$$@=!!@;$@@##@@#$*$*-----#@;;!=$$$$$$$$$$$$$$$$$@@@!!!!==!!!=====##$<br />
                ##############################***********#$$#$$##$$##$$$######$$$########$$#######$$#####$$#$@@@$$$$$$$$$$#####=####@@$$$$$$$$$;!!@$;;@$@@@#$$*$-----##====@@##$$$!!!!!!!!!!!!!!!!===!!!=====##$<br />
                ####################################*****#$$#$$##$$##$$$######$$$########$$#######$$#####$$##@@@$$$$$$$$$$#####=#;##@$$@@$$$$$$;!!$$$$$$$$$$$$$#----!========!!!!!!!!!!!!!!!=================##$<br />
                ##########################################$$#$$##$$###$$######$$$########$$#######$$#####$$##@@$$$$$$$$$$$#####=##;#@$@@$$$$$$$===$$$$!!!!!!!!!!!!==!========================================##$<br />
                $###################################****##$$#$$##$$###$$######$$$########$$#######$$#####$$##@@@$$$$$$$$$$#####=####**************;;;;;==!!!;;;;;;;;;;;;;==============$@@@@@@@@@@@$$$@@@@===#$$<br />
                $$##################################*****#$$#$$##$$###$$######$$$########$$$######$$#####$$##@@@$$$$$$$$$$#####=====**************;;;;;===;;;;;;;;;;,@@;;==@$$$$$$$$$$$@$$$#$#@$@$$@$@@$$@===#*#<br />
                $$$#######################################$$#$$##$$###$$######$$$########$$$######$$#####$$##@@$$$$$$$$$$$#####=;;;;**!!!!!!!!****=~::;==;;;##$$###,,,,;;=@@@$$@$$@$@$$$$@$@##$#==$$$$$@@$===**#<br />
                $$$$$#####################################$$#$$##$$###$$######$$$########$$$######$$#####$$##@@@$$$$$$$$$$#####=####**!!!!!!!!****=~::;;;;;=#$$$;;*,,,,;;!@@$@@@$$@$@#@@@$@@@@@@==@@=@$@@$===*#*<br />
                $$$$$$#############################**#####$$#$$##$$###$$######$$$########$$$######$$#####$$##@@$$$$$$$$$$$#####=####**!*******!!*==;::;;;;==*$$#;;#,,,,;;!$@$$@$@@@@$@$$@@$@#@@$$#===@@$$@===##*<br />
                ####$$$###################################$$##$##$$###$$#######$$########$$$######$$#####$$##@@@$$$$$$$$$$#####!####**!*******!!*==;=::;=;==#$*$$#;,,,:;;!,,,@@@@,,,#@@$$@@@#$#$$@@#===@$$==*#*@<br />
                ####$$$###################################$;;;;;;;;;;;;:~~~~:::::::::;;;;:::::::;;;;::###$$##@@@@$$$$$$$$$#####!####**********!**==;=::;=;=$#*$,,@$==,$;!!,,~$@$$$-,#@$@$$@@@#$$#@@!===*#!==#@*@<br />
                $$$$#####################################:;;;;;;;;;;;;;:~~~~:::::::::;;;;:::::::;;;;:::::::~~@@@$$$$$$$$$$#####!####*************;;:;~~;:*=$$$$$,#@=,,@;!!;,~$$@$#$$:--@$$$$!;,;$#@$#!!#!!==##*#<br />
                $$$$#####################################:;;;;;;;;;;;;;:~~~~:::::::::;;;;:::::::;;;;:::::::~~@@@@$$$$$$$$$#####!####*************;;;;~~;:*=$,,$$$$$$,,@;!!;,,@@@$$$#$#$$@$@$$#=##$@##=*!!$==####<br />
                $$$$$$$##################################:;$@;$;@;$$$@;:~~~~:::$$$$$@@@::$$$;;;;@@::$$$$@@;~~@@@$$$$$$$$$$#####!####******!!**!**;;==;;;;;@$,,@@@$@====;!!==@@@@$!$##*#@$$@$$####$@*#===!===###@<br />
                $$$$$$$##################################:;$@;$;@;$$$@;:~~~~:::$$$$$@@@::$$$;;;;@@::$$$$@@;~~@@@$$$$$$$$$$$$$##!####;*******!!!**;;=;;;;;;@$#,@@!$$$$$$;!!==$$$@$==!###$@$@@$;:$~$@###$$$===**@@<br />
                $######$#################################;=@;;$;@;;$$@;:~~~~:::$$$$$@@@::$$$;;;;$$;;::$$:::;;@@@@$$$$$$$$$$$$$#!####;*******!!!**:==::==:@@$####$@$###;;!!*!@@@@$!====!@$@@@===!!=@$!=##!===#*@#<br />
                $######$#################################;=@;;$$;$;;$;;;;:::;;;:::@@:;;;;$$$$$;;$$;;::$$:::;;@@@@$$$$$$$$$$$$$$!####$*******!!!**:~::::~:::!!!!!!!!!*#;;!!*!!!!!!!!!!!!!!!!!******@$$***#===*#@#<br />
                $$$$$$$$#################################;=@;;$$;$;;$;;;;:::;;;:::@@:;;;;$$$$$;;$$;;::$$:::;;@@@@$$$$$$$$$$$$$#!#*******~~~~!!!*::~::::~:-:!!*!======!;;!!==!!!!!!!!!!!=====!!!!!!=#$#$!!===*###<br />
                $$$$$$$$#################################:;$;;$;$$;;$;;;;:::;;;:::@@:;;::$$$::$$$$;;;;@@;;=;;@@@@$$$$$$$$$$$$##!#*******;;;;;;!!::::::::--::======!!!!;;!!!!==!!!!!!!!!!!!!!!!!!!!!#$$$$*===####<br />
                $$$$$$$$#################################:;;;;$;$$;;@;=;;~~~::::::$$:::::$$$::$$$$;;;;@@;;=;;@@@@$$$$$$$$$$$$$$!$*!!!!**;;;;;;;!:::;;::;-:::***#**$#**;;!!############!!!!!==!=!!!!!!!!!!===###*<br />
                $$$$$$$$#################################:;;;;$;$$;;@;=;;~~~::::::$$:::::$$$::$$$$;;;;@@::;~~@@@$$$$$$$$$$$$$$$!$*!!!!**;;::~;;:;==;;::;-:::#*##$#$$##;;!!$##$$#########*#####!!==!!!!!!====###*<br />
                $$$$$####################################:;;;;$;;@;;@;=;;~~~::::::$$:;;::$$$;;;;@@;;;;@@::;~~@@@$$$$$$$$$$$$$$$!$*!!!!**;;:~~;;~:;;;~:::~~~:##*$#$##$$;;!!#$#$$$$$$$*###*$##########*==!====###*<br />
                $$$$$####################################===;;$;;@;;@;;::~~~::::::@@:;;::$$$;;;;@@;;;;=======@@@@$$$$$$$$$$$$$$=$*!!!!**;;;::;;~:;;;~:::~~~::####*#*#*==!!$#==$$$$$#$#$$#$#$####$$#$**###===*###<br />
                $$$$$#####################################======;@;;@;;::~~~::::::@@:;;::$$$;================$$@$$$$$$$$$$$$$$$==*!!!!*;;;;::;~~::::::*::::::######$##==!!#*=$##$#$####*$###$$#$$$$$*####==***##<br />
                $$$$$#####################################==========@;;::~~~::::::@;;;;;;;;;;============$###$$$#$$#####$$$!!!!!!*!!!!*;;;;;;;~~::::::*:::*#$*#!=**#$$;;!!##$==$#$$$*#####$$$$$$$$$$*$#$#==*#**#<br />
                $$$$$#$$$#################################$$$$==========:~;;;;;;;;;;;;;;;;;;;=====####$$$$###$$$$$$######$##***##******;;;;;;;::;;;;;::;::!!!*!==#!!##====$##==$#$####**##$##$##$#$#*###*==*##*#<br />
                $$$##$$$$#################################$$$$$$$========;;;;;;;;;;;;;;;;;####$$$$####$$$$###*******#$###$#######$*****;;;;;;;::;;;;;::;:::!!!!!!==!======#$##$$$$$$$#!!=#$*$###$$##*#$##==#####<br />
                $$$##$$####################################$$$$$$$$$$====;;;;;;;;;###$$$$$####$$$$########$##----****---~~~!#####$##***;;;;;*;:::::::::::::**==!!==!=======!!!!!!=!!*#!==$$*$$$$##$$**##===#####<br />
                ###########################################$$#$$$$$$$$$$=;;$$$$######$$$$$########$$######$##**-$######$*****************;;**;::::::;::*::::===!=!!!***;;==!!!!!!!!!!!!!!!!!==!!$$#$###*===#*###<br />
                ###########################################$$#$$##$$$$$$$$$$$$$######$$$##$$######$$######$##!--~~********----**********;;;;*;::;;;;;::*::::****###$***==!==!!=!!!!**!!!!!!!!!!!!==!!!=*===####*<br />
                $$$$$$###########################*##!!!#$##$$#$$##$$#$$$$$$$$$$###########$$######$$######$##**!$#$!!***********~~~*****;;;*;;::;;;:;;;#=;==###*###$$####******!!!*****##*!!!!!!!==!!!=====$####<br />
                $$$$$$###################!!!!*****$###!!!##$$#$$##$$##$$$$$$###$$$########$$######$$######$##$$$$$#~$$$$$!!******!!$****;;;*;;;;;:::;;;##;:;#######$$####*******####$$#==!!*!!**********#==$$###<br />
                $$###############*****!!!!!!!*****$#$$##*!#$$#$$##$$##$$$######$$$########$$######$$######$###:::::$$$$#######!!###$#***;;;*;;;;;:;;;;;**;:;####*##$$###############$$#####****!!**!*****##$$###<br />
                $$#######*****###*****************$$$##*$#$$$#$$##$$###$$######$$$########$$######$$######$##:::$$$$$$$$$$***#$####$***#!!=*;;;;;;;;;;;**::::#*#;###################$$#####******######**###$$##<br />
                $*************###*****************$$$##$**$$$##$##$$###$$######$$$########$$######$$##$$$$$##$$:::::#$$#######$####$****=;;*;;;;;;;;;;***::$@$$#####################$$###################$$$####<br />
                **************###*****************$$$$$$#$$$$$#$##$$###$$######$$$########$$#####$$$##$$$$$$$$$$$$$:~~=#####$#$####*****=;;=;;;;;;;;;;****;:;;###########################################$$$####<br />
                ******######***##*****************$$$$$$#$##$$$$##$$###$$######$$$########$$##$$$$$$##$***#$$$$$***##;=##$$$$#$####$****;;;;;;;;;;;;;;****;$#######$$####################################$$$####<br />
                #*****###***#####*****************$$$$$$#$##$#$$$$$$###$$######$$$#######$$$##$$$$$#$$****#$$***#####;=$$$$$$#$####*****;;;;;;:;;;;;;;$$$$$$#######$$###############$$###################$$$####<br />
                #########***##########*****###**##$$$$$$#$##$##$$$$$###$$######$$$###$$$$$$$##$***##$$**##$$$######$$;=$$$$$$$$####@****=;==;;;;;;;;;;$$$$$$$$$$###$$$$#############$$###################$$$####<br />
                #########################**###*###$$$$$$#$##$####$$$$$#$$######$$$###$$$$$$$$$****##$#####$$$###$$$$$!!$$$$$$$$*##$@$$$*=***;;;;;;;;;;$$$$$$$$$$$$$$$$$#############$$###################$$$####<br />
                #########################*########**$$$$#$##$###$##$$$$$$###$$$$$$###$$$**##$$***#$$######$$$#$$$$$$$!!$$$$$$@$*$$$@$$$*****;;;;;;:::;####$$$$$$$$$$$$$$$$$#########$$###################$$$####<br />
                #######################**#########***$$$#$##$##$$##$$$$$$$$$$$$$$$##$*****##$$####$$#$####$$$#$$$$$$$!!$$$$$$@@$$$*$$$$*****;;:::;:::;######$$$$$$$$$$$$$$$$$$$$####$$$$#################$$$####<br />
                ###############$$$################*@*!$$#$##$##$$##$$#$$$$$$$$$$##$$$*****$$######$$$$####$$$#$$$$$$$!!$$$$@@@$$$$$$$$$*****;;::;;;;;;######$$$#####$$$$$$$$$$$$$$$$$$$$###$$############$$$####<br />
                ###############$$$###########$##$$*@*!!$$$##$##$$###$###$$$$***###$$$**###$$######$$$$####$$$#$$$$$$$!!$$@@@@$$$$$$$$$$*!***;;;;;;;;;;#$$$##$##$$########$$$$$$$$$$$$$$$$$$$$$$#########$$$$####<br />
                ###############$$$######$$$$$$$$$**@**!!$$##$##$$##$$###$******###$#######$$######$$$$####$$$#$$$$$$$!!@@@@@$$$$$$$$$$$*!!!*;;;;;;;;;;#$$$$$$$$$$##########$$#$$$$$$$$$$$$$$$$$$$##$$$$$$$$$$$$#<br />
                ############$$$$$$#$$$$$$$$$####******@!==##$##$$##$$###$******#$$########$$######$$$$####$$$#$$$$$$@@@@@@@@$@$$$$$$$$$**!!*;;;;;;:;;;$$$$##$$$############$$######$$$$$$$$$$$$$$$$$$$$$$$$$$$$#<br />
                ############$$$$$$$$$$$##$$$######***@@!!=;#$##$$##$$##$$***###$$$########$$$$####$$$$####$;;#$$$$@@@@@@@@@@$@$$$$$$$$$*****;;;:;;:;:;#$$$$$$$$$###$$######$$###########$$$$$$$$$$$$$$$$$$$$$$$#<br />
                ##########$$$$$$$$$######$$#######****$!$=;=$##$$##$$##$$#######$$########$$$$####$$$$##;==;;#$$@@@@@@@@@@@@$@$$$$$$$$$$$***;;;:;;#####$$$$$$$$$$$######$$$$$$$##############$$$$$$$$$$$$$$$$$$#<br />
                #####$$$$$$$$$#####################**@$!$!;==##$$##$$##$$$######$$########$$$$####$$$$;;===;;@@@@@@@@@@@@@@@$@$$$$$$$$$$$$$*;;#########$$$$$$$$$$$$$$$$$$$$$$$$$##########$$$$$$$$$$$$$$$$$$$$$#<br />
                $$$$$$$$$$################$$######@#*@$!$!;===#$$##$$##$$$######$$########$$$$####$=;;===@=;;@@@@@@@@@@@@@@@$@$$$$$$$@$$$$$$#######**##$$$$$$$$$$$$$$$$$$$$$$$$$$$$#####$$###$$$$$####$$$$$$$$$#<br />
                $$$$$$$###################$$#######@#@**@!==$==$$##$$##$$$######$$########$$$$###===;=$$@@=;=$@@@@@@@@@@@@@@$@$$$$$$@$$$$$$$##***##*###$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$###$$$$$#########$$$@#<br />
                $###$$$###################$$#######@##**@!=!$$===##$$##$$$######$$##$#####$$$$;;;===$$$$@====$@@@@@@@@@@@@@@$@$$$$@@$$$$$$$$##**#######@$$$$$$$$$$$$$$$$$$$$$$$$$##$$$$$$$$$$$$$$$$$$$########@#<br />
                ####$$$###################$$#######@@#**@!=!=$====#$$##$$$######$$$$$#####$;;;;;;=@=$$$$=====$@@@@@@@@@@@@@@$@$$$@@$$$$$$$$$############$$$$$$$$$$$$$$$$$$$$$$$$$$#$$$$$$$$$$$$$$$$$$$$$##$#**$@<br />
                ####$$$###################$$###$$##@$$**@!==!@=$===$$##$$$######$$$$$####=;;;;;==@@=$=$$==!==$@@@@@@@@@@@@@@$@@@@$$##$$$$$$$###########$$##$$#$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$######@<br />
                ####$$$###################$$$$$$$#$$$@@**!!=!@!$====$##$$$######$$$$$#;;==;;;====@@===$$==!=;$@@@@@@@@@@@@@@$*@@#$###$$$$$$$########*##$$$$$####$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$####***<br />
                ####$$$###$$$###########$$$$$$$$$$$$$@@$**===@!$=====##$$$######$$$$;;====$$=====$$===@@=!!==$@@@@@@@@@@@@@@@*##**#####$$$$$#########$$$$$$#####$$$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$#$$$###<br />
                ####$$$###$$$#########$$$$$$$$$$$$$$@@$$$*===$!$$=@===#$$$######$;;;;===;;$$=====$$===@@==!=!$@@@@@@@@@@@@@@@####**###$$$$$$##*#####$$$$$$#######$$##$$$@@@@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$##$$$**<br />
                ##$$$$$##########$$$$$$$$$$$$$$$$$$@@@$@$$*=!$=$$!@=$===$$#####;;;;;;=@@;;$$$$$==$$===@@==!!!$@@@@@@@@@@@@@###****#*##$###$$###$#####$$$$#######$$$###$##$$@$$$$@$$$$$$$$$$$$$$$$$$$$$$$$@#$$$**<br />
                #$$$$$$########$$$$$$$$$$$$$$$$$$$$$@$$$$$**!@!$$!$=$$===$##:;;;;;;$$@@@;=$$$$$$$$$==!@@!!!!*$@@@@@@@@@@@@##*******##########$$#####$$$$$$######$$#######$$$##$$@@@@@$$$$$$$$$$$$$$$$$$$$####$**<br />
                #$$$$$$$##$$$$$$$$$$$$$$$$$$$##$$#$$@$@$$$$**@!!=!$!$$@==;:::;;=;$$$$@@===$$$==$$$@=!!@!!!!$$$@@@@@@@@@@###*******###***####$$#######$$$########$$#######$$##$##$$@@@@@$$$$$$$$$$$$$$$$$$$####**<br />
                #$$$$$$$$$$$$$$$$$$$$$$$$########$$##@@$$$$$**!!!$$!=$@==;:::=;;$$$$$=====$$===$=@@!!!!!!$$$$$@@@@@@@@@##********##*******#$$#######$$$#################$$$#####$$$$$$@$$$$$@@@$$$$$$$$$$$#####*<br />
                #$$$$$$$$$$$$$$$$$$$$$###$$$$#$$$$$##$@$$$$$$**!!$$!=$@!=;:::;;;$$$@@=====$$=====@@!!!!$$$$$$$@@@@@@@###*****#####*****#####***#####$#***#######***#####$$#######$$$$#$$$$$$@@@$$$$$$$$$$$#####*<br />
                $$$$$$$$$$$$$$$$$$$###$$$$$$$######$#$@@$$$$$$**!!$!=$=!!;:::;;;===@@=====$$====!!!!!$$$$$$$$$@@@@@###*****#####*******####**###***##********$##**#####$$$########$$###$$$$$@@@$$$$$$$$$$#######<br />
                $$$$$$$$$$$$$$$$$####$$$$$######$#$$$##@$$$$$$$**!@!!$==!;:::;=====@$=====$$===!!!!$$$$$$$$$$$@@@@$##**##*#####********###**###***##*##***#*$$$***#####$$$#######$$$###$$$##$$$#$$$$@@@$$###$$$#<br />
                $$$$$$$$$$$$$#####$$$$$#########$$###$$$$$$$$$$$**@!!@===;::;==!===$$=====$$=!!!!!$$$$$$$$$$$@@@$$$***#####$$$********###***###**##******#####***###**$$$########$$$#####$$$$$$##$$$@@@@$#$##$$$<br />
                $$$$$$$$$###$$#$$$$$#########$$$########$@@$$$$$***!!@!===;;;!!!===$$=====$!!!!!$$$$$$$$$$$$$@@##$**###***$$$#####***###**#**######*******####*****######**######$$$########$$$###$$$$$@$#$####$<br />
                $$$$$$###$$$$$$$$$########$$$########$$$#@@$$$$$$**!!@!!==;;=!=====$@====!!!!!$$$$$$$$$$$$$$$###***########***####**$##****#**####********###********###***######$$#########$$$#####$$$$$#$##$$#<br />
                $$$###$$$##$$$$$$$$$###$$$#########$$#####@$$$$$$$**!@@!!===;======@@==!!!!!$$$$$$$$$$$$$$$$$$######***###***######$$***##****###******#*###*********###***#####$$$#########$$$#####$$$$#######$<br />
                $##$$$$$#$$$##$$$$##$$$#########$$$########$$$$$$$$**@@!!!;;;======@@!!!!!$$$$$$$$$$$$$$$$$$$#######**###***#####$$$***###***#####****##*######*****####**########$*########$$$#####$$$$########<br />
                $$$##$$$$###$$$$$$$$#########$$$#########$$$$$$$$$$$**@!!!;;;======!!!!!$$$$$$$$$$$$$$$$$$$$######**####**########$***###***###**#***##*###*********###*##**#*#######*######$$$########$###$####<br />
                ###$$$#########$$$##########$$#########$$$##@$$$$$$$$**!!=;;;====!!!!!!$$$$$$$$$$$$$$$$$$$###############*##*#####*****###*###******##*###*******#####*********#############$$$##########$#$####<br />
                $$$###$$####$$$#########$###########$$$$*####@$$$$$$$$**!=;;;==!!!!!!$$$$$$$$$$$$$$$$$$$@***#########******#**###******######**********###*********###******#**###**#**####$$$$##########$#$@#$$<br />
                $$#######$$$##########$$$#**######$$$***#####@@$$$$$$$***=;;;=!!!!!$$$$$$$$$$$$$$$$$$$$*****#***$$$#******######******########**#*****###*********####******######******#####$$##########$##@##$<br />
                ######$############$$$***##**####$$****##**#$$$@$$$$$$$***;;!!!!!$$$$$$$$$$$$$$$$$$$$$*********##$***###*######******#######*#####***###**********######***#######******#######################$<br />
                ###$$###########$$$$******###$###*********#$$**@@$$$$$$$**!!!!!$$$$$$$$$$$$$$$$$$$$$***##**#**$####*#######$$#******#######****###***###*********####**#***#######******######*#############@##$<br />
                #$$$##########$$$##*###***#$$$**********$###***#@$$$$$$$$*!!!$$$$$$$$$$$$$$$$$$$$$$***######$$$$###**#####$$$*********####*******######**********###*******######********#####****##########$##$<br />
                $###########$$$*#####****###**********$$$#######@$$$$$$$$$!!$$$$$$$$$$$$$$$$$$$$$***#######$$$####***###$$$$**********###***###****###**********####******#########********###****########$#$##$<br />
                #*##########***#####**####**********##$******####$@$$$$$$$$$$$$$$$$$$$$$$$$$$$$$*****####*###*******#######**********###****##****####**********###********######*####*****$$#******######$####$<br />
                ##*######****#**#######*******#***###*******###$$$@$$$$$$$$$$$$$$$$$$$$$$$$$$$*******###$$##*******##########*******###*****#*****###**********####**********####***####***#$$#******#####$##$#$<br />
            </p>
        </div>

        <script>
            const imageSelectInput = document.getElementById("image-selector");
            const imageProcessButton = document.getElementById("image-process");
            const saveButton = document.getElementById("save-button");
            saveButton.disabled = true;
            const reader = new FileReader();
            reader.onloadend = imageLoaded;
            let image = undefined;
            let asciiImage = undefined;
            let htmlImage = undefined;

            const invert = true;

            const valueToChar = {
                0: "\u00A0", // Non-breaking space
                1: ".",
                2: ",",
                3: "-",
                4: "~",
                5: ":",
                6: ";",
                7: "=",
                8: "!",
                9: "*",
                10: "#",
                11: "$",
                12: "@",
            };

            valueToHTML = {
                0: "&nbsp;", // Non-breaking space
                1: ".",
                2: ",",
                3: "-",
                4: "~",
                5: ":",
                6: ";",
                7: "=",
                8: "!",
                9: "*",
                10: "#",
                11: "$",
                12: "@",
            };

            // Default max and min
            let maxValue = 255.0;
            let minValue = 0.0;
            let reductionFactor = 10.0;
            // Reduces all 256 possible values down to just 13
            function bandValue(value) {
                return Math.floor(
                    ((value - minValue) * 13.0) / (maxValue - minValue + 1.0),
                );
            }

            function saveFile() {
                const zip = new JSZip();
                zip.file("asciiTextImage.txt", asciiImage);
                zip.file("htmlTextImage.txt", htmlImage);
                zip.generateAsync({ type: "blob" }).then(function (content) {
                    saveAs(content, "textImages.zip");
                });
            }

            async function imageLoaded() {
                image = await IJS.Image.load(reader.result);
                console.log(document.getElementById("media"));
                document.getElementById("media").src = image.toDataURL();
            }

            function loadImage() {
                image = undefined;
                reader.readAsArrayBuffer(imageSelectInput.files[0]);
            }

            function processImage() {
                if (image === undefined || image === null) {
                    return;
                }

                let reduced = image.resize({ factor: 1.0 / reductionFactor });

                let grey = reduced.grey();

                const rowsArray = [];
                for (let i = 0; i < grey.height; i++) {
                    rowsArray.push(grey.getRow(i));
                }

                asciiImage = "";
                htmlImage = "";
                rowsArray.forEach((row) => {
                    for (let i = 0; i < grey.width; i++) {
                        charIndex = bandValue(row[i]);
                        if (invert) {
                            charIndex = 12 - charIndex;
                        }
                        asciiImage += valueToChar[charIndex];
                        htmlImage += valueToHTML[charIndex];
                    }
                    asciiImage += "\n";
                    htmlImage += "<br/>\n";
                });

                document.getElementById("result").innerHTML = htmlImage;
                saveButton.disabled = false;
            }
        </script>
    </body>
</html>
